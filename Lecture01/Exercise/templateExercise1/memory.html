<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memory Game</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1 class="text-center my-4">Memory Game</h1>
        <div id="game-board" class="row justify-content-center">
            <div class="card" onclick="flipCard('card-1')" id="card-1"> ? </div>
            <div class="card" onclick="flipCard('card-2')" id="card-2"> ? </div>
            <div class="card" onclick="flipCard('card-3')" id="card-3"> ? </div>
            <div class="card" onclick="flipCard('card-4')" id="card-4"> ? </div>            
        </div>
    </div>


    <script>
        let cards = {
            'card-1': 'apple',
            'card-2': 'banana',
            'card-3': 'apple',
            'card-4': 'banana'
        };

        let flippedCards = []; // Array of flipped cards

        function flipCard(cardId) {
            if (flippedCards.length === 2) {
                return; // T3: only two cards can be flipped at a time
            }

            let cardElement = document.getElementById(cardId);

            if (cardElement.classList.contains('flipped')) {
                return; // T3: ensure that cards can only be clicked once per round
            }

            // Flip the card
            cardElement.textContent = cards[cardId]; // T3: when a card is clicked ...
            cardElement.classList.add('flipped'); // T3: add a basic visual indicator when a card is flipped
            flippedCards.push(cardId);

            if (flippedCards.length === 2) {
                checkForMatch(); // T4: match checking
            }
        }

        function checkForMatch() {
            const [firstCardId, secondCardId] = flippedCards;

            if (cards[firstCardId] !== cards[secondCardId]) {
                setTimeout(() => {
                    let firstCard = document.getElementById(firstCardId);
                    let secondCard = document.getElementById(secondCardId);

                    firstCard.textContent = "?";
                    secondCard.textContent = "?";

                    firstCard.classList.remove('flipped');
                    secondCard.classList.remove('flipped');
                }, 1000); // Wait 1 second before resetting
            } // T4: if they're not the same, we flip them back

            flippedCards = [];
        }
    </script>
</body>
</html>